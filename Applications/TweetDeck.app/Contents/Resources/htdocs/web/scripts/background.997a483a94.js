function handlePageChange(e){var t=chrome.extension.getURL("");e.url.substr(0,t.length)===t&&-1!==e.url.indexOf(TD.bg.MAIN_APP_PAGE_LOCATION)?theTab?e.id!=theTab.id&&(console.log("Duplicate TweetDeck page"),chrome.tabs.remove(e.id),TD.bg.utils.showTDTab()):(console.log("TweetDeck page created"),theTab=e):theTab&&e.id==theTab.id&&(console.log("User has navigated away"),handlePageDeath(e.id))}function handlePageDeath(e){theTab&&e==theTab.id&&(console.log("TweetDeck page closed"),theTab=null)}TD={bg:{},util:{}},TD.util.isChromeApp=function(){return!0},TD.bg.init=function(){TD.bg.contextMenu.init(),TD.bg.MAIN_APP_PAGE_LOCATION="web/templates/default.html"};var theTab=null;chrome.tabs.onCreated.addListener(function(e){handlePageChange(e)}),chrome.tabs.onUpdated.addListener(function(e,t,i){t.url&&handlePageChange(i)}),chrome.tabs.onRemoved.addListener(function(e){handlePageDeath(e)}),TD.buildID="LOCAL",TD.buildIDShort="LOCAL",TD.version="10.101.0",TD.config={debug_level:0,debug_checks:!0,debug_menu:!0,scribe_debug_level:1,twogin:!1,api_root:"https://smfd-akc-08-sr1.devel.twitter.com:8443",td_create_key:"WYhuRGOFl3cf82xzL5qB",td_create_secret:"Ob4DxpijlICA+cb3h5Ca5My3CEYp/lgMg84nly+5k2A=",sync_name:"blackbird",client_name:"blackbird",internal_build:!0,touchdeck:!1,i18n_test:!1,i18n_test_length_ratio:.65,i18n_test_padding_char:"d"},TD.util.i18n=function(){var e,t={};return t.getMessage=function(e){if("undefined"==typeof TD_locale_messages)return void 0;var t=TD_locale_messages[e];return t&&t.message?t.message:void 0},t.getLocale=function(){return e?e:(TD.util.isChromeApp()&&(e=t.getMessage("@@ui_locale")),e)},t}(),TD.i=function(){var e=/[^A-Za-z0-9_]/g,t={},i=TD.config.i18n_test_length_ratio||.2,s=TD.config.i18n_test_padding_char||"d";return function(n,r,o){var a,c,l;return"string"==typeof n&&(n={text:n}),"en_US"===TD.util.i18n.getLocale()?c=n.text:(a=t[n.text],void 0===a&&(a=n.text.replace(e,""),t[n.text]=a),c=TD.util.i18n.getMessage(a)||n.text),o||(c=TD.ui.template.toHtml(c,r)),TD.config.i18n_test&&(l=Math.round(c.length*i),c+=Array(l+1).join(s)),c}}(),TD.bg.utils={},TD.bg.utils.getActiveTabWindow=function(){for(var e,t=chrome.extension.getViews(),i=0;t.length>i;i++)if(e=t[i],e.location.href==theTab.url)return e},TD.bg.utils.showTDTab=function(){if(theTab){var e=function(e){theTab=e,chrome.windows.get(e.windowId,t)},t=function(e){e.focused||chrome.windows.update(e.id,{focused:!0})};chrome.tabs.get(theTab.id,e),chrome.tabs.update(theTab.id,{selected:!0})}},TD.bg.utils.focusOrOpenTDTab=function(e){var t=function(){var t=TD.bg.utils.getActiveTabWindow(),i=function(){return t.TD&&t.TD.ready?(e(t),void 0):(setTimeout(i,500),void 0)};i()};theTab&&theTab.id?(TD.bg.utils.showTDTab(),t()):chrome.tabs.create({url:TD.bg.MAIN_APP_PAGE_LOCATION},function(){setTimeout(function(){t()},100)})},TD.bg.contextMenu=function(){var e={},t=chrome.contextMenus;chrome.i18n.getMessage;var i=function(e,t){var i;e.linkUrl?i=e.linkUrl:(t&&t.title&&(i=t.title,i.length>100&&(i=i.substr(0,100)+"â€¦"),i+=" "),i+=e.pageUrl),TD.bg.utils.focusOrOpenTDTab(function(e){e.jQuery(e.document).trigger("uiComposeTweet",{text:i.trim()+" "})})};return e.init=function(){t.create({title:TD.i("Share page with TweetDeck",null,!0),onclick:i}),t.create({title:TD.i("Share link with TweetDeck",null,!0),onclick:i,contexts:["link"]})},e}(),TD.bg.init();