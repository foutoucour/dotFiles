function handlePageChange(e){var t=chrome.extension.getURL("");e.url.substr(0,t.length)===t&&e.url.indexOf(TD.bg.MAIN_APP_PAGE_LOCATION)!==-1?theTab?e.id!=theTab.id&&(console.log("Duplicate TweetDeck page"),chrome.tabs.remove(e.id),TD.bg.utils.showTDTab()):(console.log("TweetDeck page created"),theTab=e):theTab&&e.id==theTab.id&&(console.log("User has navigated away"),handlePageDeath(e.id))}function handlePageDeath(e){theTab&&e==theTab.id&&(console.log("TweetDeck page closed"),theTab=null)}TD={bg:{},util:{}},TD.util.isChromeApp=function(){return!0},TD.bg.init=function(){TD.bg.contextMenu.init(),TD.bg.MAIN_APP_PAGE_LOCATION="web/templates/default.html"};var theTab=null;chrome.tabs.onCreated.addListener(function(e){handlePageChange(e)}),chrome.tabs.onUpdated.addListener(function(e,t,n){t.url&&handlePageChange(n)}),chrome.tabs.onRemoved.addListener(function(e){handlePageDeath(e)}),TD.util.i18n=function(){var e={},t,n,r=function(e){if(typeof TD_locale_messages=="undefined")return undefined;var t=TD_locale_messages[e];return t&&t.message?t.message:undefined},i=function(e){var t=deck.i18n(e);return t?t:undefined};return e.getMessage=function(e){return t||(TD.util.isChromeApp()?t=chrome.i18n.getMessage:TD.util.isWrapperApp()?t=i:t=r),t(e)},e.getLocale=function(){return n?n:(TD.util.isChromeApp()&&(n=e.getMessage("@@ui_locale")),n)},e}(),TD.i=function(){var e=/[^A-Za-z0-9_]/g,t={};return function(n,r,i){var s,o,u;return typeof n=="string"&&(n={text:n}),TD.util.i18n.getLocale()==="en_US"?u=n.text:(s=t[n.text],s===undefined&&(s=n.text.replace(e,""),t[n.text]=s),u=TD.util.i18n.getMessage(s)||n.text),i||(u=TD.ui.template.toHtml(u,r)),u}}(),TD.buildID="d9955aff741236fc87391f127b61eaf1f873614e",TD.buildIDShort="d9955af",TD.version="3.0.5",TD.config={api_root:"https://api.tweetdeck.com",td_create_key:"wDCH6bkOBY1tWlfvFhra",td_create_secret:"/CCPYnccw6SpcCaKf7JdzidTYph13Y5ZZUafFwMBNUU=",client_name:"blackbird",debug_menu:!1,sync_name:"blackbird"},TD.bg.utils={},TD.bg.utils.getActiveTabWindow=function(){var e=chrome.extension.getViews(),t;for(var n=0;n<e.length;n++){t=e[n];if(t.location.href==theTab.url)return t}},TD.bg.utils.showTDTab=function(){if(!theTab)return;var e=this,t=function(e){theTab=e,chrome.windows.get(e.windowId,n)},n=function(e){e.focused||chrome.windows.update(e.id,{focused:!0})};chrome.tabs.get(theTab.id,t),chrome.tabs.update(theTab.id,{selected:!0})},TD.bg.utils.focusOrOpenTDTab=function(e){var t=function(){var t=TD.bg.utils.getActiveTabWindow(),n=function(){if(t.TD&&t.TD.ready){e(t.TD);return}setTimeout(n,500)};n()};theTab&&theTab.id?(TD.bg.utils.showTDTab(),t()):chrome.tabs.create({url:TD.bg.MAIN_APP_PAGE_LOCATION},function(e){setTimeout(function(){t()},100)})},TD.bg.contextMenu=function(){var e={},t=chrome.contextMenus,n=chrome.i18n.getMessage,r=function(e,t){var n;e.linkUrl?n=e.linkUrl:(t&&t.title&&(n=t.title,n.length>100&&(n=n.substr(0,100)+"â€¦"),n+=" "),n+=e.pageUrl),TD.bg.utils.focusOrOpenTDTab(function(e){e.ui.compose.showComposeWindow(n+" ")})};return e.init=function(){t.create({title:TD.i("Share page with TweetDeck",null,!0),onclick:r}),t.create({title:TD.i("Share link with TweetDeck",null,!0),onclick:r,contexts:["link"]})},e}(),TD.bg.init();